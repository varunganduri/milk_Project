"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[308],{4220:(e,s,t)=>{t.d(s,{A:()=>i});t(5043);var r=t(579);const i=()=>(0,r.jsx)("div",{className:"dot-spinner",children:Array.from({length:8},((e,s)=>(0,r.jsx)("div",{className:`dot-spinner__dot dot-spinner__dot--${s+1}`},s)))})},2308:(e,s,t)=>{t.r(s),t.d(s,{default:()=>o});var r=t(5043),i=t(3216),n=t(4220),c=t(579);const o=()=>{const[e,s]=(0,r.useState)([]),[t,o]=(0,r.useState)(null),[l,a]=(0,r.useState)(!0),[d,h]=(0,r.useState)(!1),[j,x]=(0,r.useState)(null),[u,m]=(0,r.useState)(1),p=(0,i.Zp)(),v=e=>{(async e=>{const s=localStorage.getItem("authToken");try{const t=await fetch(`https://prasad-gz5p.onrender.com/api/view-invoice/${e}/`,{headers:{Authorization:`Token ${s}`}});if(!t.ok)throw new Error("Failed to get Invoice");const r=await t.json();x(r),h(!0),o(null)}catch(t){o(t.message)}})(e)},y=()=>{h(!1),x(null)},b=7*u,g=b-7,k=e.slice(g,b),N=Math.ceil(e.length/7);return(0,r.useEffect)((()=>{(async()=>{const e=localStorage.getItem("authToken");try{const t=await fetch("https://prasad-gz5p.onrender.com/api/order-history/",{headers:{Authorization:`Token ${e}`}});if(!t.ok)throw new Error("Failed to fetch order history");const r=await t.json();s(r.orders?r.orders.reverse():[]),o(null)}catch(t){o(t.message)}finally{a(!1)}})()}),[]),(0,c.jsxs)("div",{className:"order-historyV890",children:[(0,c.jsxs)("div",{className:"order-history-containerV890",children:[(0,c.jsx)("p",{className:"order-history-title-V890",children:"Your Order History"}),(0,c.jsx)("button",{onClick:()=>p("/customer-home"),className:"back-button999V890",children:"Back to Home"})]}),(0,c.jsx)("div",{className:"order-history1V890",children:l?(0,c.jsx)("div",{className:"order-spinner",children:(0,c.jsx)(n.A,{})}):(0,c.jsxs)(c.Fragment,{children:[t&&(0,c.jsx)("p",{className:"error-message",children:t}),e.length>0?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("table",{className:"order-tableV890",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Order ID"}),(0,c.jsx)("th",{children:"Price of Products"}),(0,c.jsx)("th",{children:"Action"})]})}),(0,c.jsx)("tbody",{children:k.map(((e,s)=>(0,c.jsxs)("tr",{className:"order-itemV890",children:[(0,c.jsx)("td",{children:e.id}),(0,c.jsxs)("td",{children:["\u20b9",e.price]}),(0,c.jsx)("td",{children:(0,c.jsx)("button",{className:"view-invoice-buttonV890",onClick:()=>v(e.id),children:"View Invoice"})})]},s)))})]}),(0,c.jsxs)("div",{className:"pagination-controls",children:[(0,c.jsx)("button",{onClick:()=>{u>1&&m((e=>e-1))},disabled:1===u,children:"Previous"}),(0,c.jsxs)("span",{children:["Page ",u," of ",N]}),(0,c.jsx)("button",{onClick:()=>{u<N&&m((e=>e+1))},disabled:u===N,children:"Next"})]})]}):(0,c.jsx)("p",{children:"Your order history is empty"})]})}),d&&(0,c.jsx)("div",{className:"modal-overlayV890",onClick:y,children:(0,c.jsxs)("div",{className:"modal-contentV890",onClick:e=>e.stopPropagation(),children:[(0,c.jsx)("h2",{children:"Invoice Details"}),j&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("h3",{children:["Invoice ID: ",j.invoice_id]}),(0,c.jsxs)("table",{className:"invoice-tableV890",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Product ID"}),(0,c.jsx)("th",{children:"Quantity"}),(0,c.jsx)("th",{children:"Total Price"})]})}),(0,c.jsx)("tbody",{children:j.items.slice().reverse().map(((e,s)=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:e.product_id}),(0,c.jsx)("td",{children:e.quantity}),(0,c.jsxs)("td",{children:["\u20b9",e.total_price]})]},s)))})]})]}),(0,c.jsx)("button",{className:"close-buttonV890",onClick:y,children:"Close"})]})})]})}}}]);
//# sourceMappingURL=308.d9703521.chunk.js.map