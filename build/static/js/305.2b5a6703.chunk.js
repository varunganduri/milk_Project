"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[305],{2305:(a,e,n)=>{n.r(e),n.d(e,{default:()=>c});var d=n(5043),r=n(5475),t=n(579);const s=a=>{let{onBrandUpdate:e,selectedBrand:n}=a;const[r,s]=(0,d.useState)({brandID:"",brandName:"",brandLogo:null}),[o,l]=(0,d.useState)(""),[c,i]=(0,d.useState)("");(0,d.useEffect)((()=>{n&&(s({brandID:n.brandID,brandName:n.brandName,brandLogo:null}),l(n.brandLogo))}),[n]);const b=a=>{const{name:e,value:n}=a.target;s({...r,[e]:n})};return(0,t.jsxs)("div",{className:"update-brand-containerV028",children:[(0,t.jsx)("h2",{className:"update-brand-titleV028",children:"Update Brand"}),(0,t.jsxs)("form",{onSubmit:async a=>{a.preventDefault();const n=new FormData;if(n.append("brandID",r.brandID),n.append("brandName",r.brandName),r.brandLogo)n.append("brandLogo",r.brandLogo);else if(o){const a=await fetch(o),e=await a.blob(),d=new File([e],o.split("/").pop(),{type:"image/jpeg"});n.append("brandLogo",d)}const d=localStorage.getItem("authToken");try{const a=await fetch(`https://prasad-gz5p.onrender.com/api/brands/${r.brandID}/update/`,{method:"PUT",body:n,headers:{Authorization:`Token ${d}`}});if(!a.ok)throw new Error("Failed to update brand");const t=await a.json(),l=r.brandLogo?URL.createObjectURL(r.brandLogo):o;e({...t,brandLogo:l}),s({brandID:"",brandName:"",brandLogo:null}),i("Brand updated successfully!")}catch(t){i(t.message)}},className:"update-brand-formV028",children:[(0,t.jsx)("input",{type:"text",name:"brandID",placeholder:"Brand ID",value:r.brandID,onChange:b,required:!0,disabled:!0,className:"update-brand-inputV028"}),(0,t.jsx)("input",{type:"text",name:"brandName",placeholder:"Brand Name",value:r.brandName,onChange:b,required:!0,className:"update-brand-inputV028"}),(0,t.jsx)("input",{type:"file",name:"brandLogo",accept:"image/*",onChange:a=>{s({...r,brandLogo:a.target.files[0]})},className:"update-brand-fileV028"}),o&&(0,t.jsxs)("div",{className:"update-brand-logoV028",children:[(0,t.jsx)("img",{src:o,alt:"Current Brand Logo",className:"update-brand-imgV028"}),(0,t.jsxs)("p",{className:"update-brand-current-logoV028",children:["Current logo: ",o.split("/").pop()]}),(0,t.jsxs)("label",{className:"update-brand-checkbox-labelV028",children:[(0,t.jsx)("input",{type:"checkbox",checked:!r.brandLogo,onChange:()=>s({...r,brandLogo:null}),className:"update-brand-checkboxV028"}),"Use current logo"]})]}),(0,t.jsx)("button",{type:"submit",className:"update-brand-buttonV028",children:"Update Brand"})]}),c&&(0,t.jsx)("div",{className:"update-brand-messageV028",children:c})]})},o=a=>{let{onBrandAdded:e}=a;const[n,r]=(0,d.useState)({brandID:"",brandName:"",brandLogo:null}),[s,o]=(0,d.useState)(""),l=a=>{const{name:e,value:d}=a.target;r({...n,[e]:d})};return(0,t.jsxs)("div",{className:"add-brand-containerV029",children:[(0,t.jsx)("h2",{className:"add-brand-titleV029",children:"Add a New Brand"}),(0,t.jsxs)("form",{onSubmit:async a=>{a.preventDefault();const d=localStorage.getItem("authToken");if(!d)return void o("You are not authenticated. Please log in.");const t=new FormData;t.append("brandID",n.brandID),t.append("brandName",n.brandName),n.brandLogo&&t.append("brandLogo",n.brandLogo);try{const a=await fetch("https://prasad-gz5p.onrender.com/api/brands/",{method:"POST",headers:{Authorization:`Token ${d}`},body:t});if(!a.ok)throw new Error("Failed to add brand");const n=await a.json();e(n),r({brandID:"",brandName:"",brandLogo:null})}catch(s){o(s.message)}},className:"add-brand-formV029",children:[(0,t.jsx)("input",{type:"text",name:"brandID",placeholder:"Brand ID",value:n.brandID,onChange:l,required:!0,className:"add-brand-inputV029"}),(0,t.jsx)("input",{type:"text",name:"brandName",placeholder:"Brand Name",value:n.brandName,onChange:l,required:!0,className:"add-brand-inputV029"}),(0,t.jsx)("input",{type:"file",name:"brandLogo",accept:"image/*",onChange:a=>{r({...n,brandLogo:a.target.files[0]})},className:"add-brand-fileV029"}),(0,t.jsx)("button",{type:"submit",className:"add-brand-buttonV029",children:"Add Brand"})]}),s&&(0,t.jsx)("div",{className:"add-brand-messageV029",children:s})]})};n(3910);var l=n(4594);const c=()=>{const[a,e]=(0,d.useState)([]),[n,c]=(0,d.useState)(!0),[i,b]=(0,d.useState)(null),[u,m]=(0,d.useState)(null),[p,h]=(0,d.useState)(!1),[g,N]=(0,d.useState)(""),x=(0,d.useRef)(null);(0,d.useEffect)((()=>{(async()=>{try{const a=await fetch("https://prasad-gz5p.onrender.com/api/brands/");if(!a.ok)throw new Error("Network response was not ok");const n=await a.json();e(n)}catch(a){b(a.message)}finally{c(!1)}})()}),[]);const j=a.filter((a=>a.brandName.toLowerCase().includes(g.toLowerCase())));return n?(0,t.jsx)("div",{children:(0,t.jsx)(l.A,{})}):i?(0,t.jsxs)("div",{children:["Error: ",i]}):(0,t.jsxs)("div",{className:"brand-listV030",children:[(0,t.jsx)("div",{className:"arrow-back-124",children:(0,t.jsx)("button",{className:"add-brand-buttonV030",onClick:()=>h(!p),children:p?"Cancel":"Add Brand"})}),(0,t.jsx)("div",{className:"search-bar-containerV030",children:(0,t.jsx)("input",{type:"text",placeholder:"Search by Brand Name",value:g,onChange:a=>N(a.target.value),className:"search-barV030"})}),p&&(0,t.jsx)(o,{onBrandAdded:n=>{e([...a,n]),h(!1)}}),(0,t.jsx)("div",{className:"card-containerV030",children:j.map((a=>(0,t.jsxs)("div",{className:"brand-cardV030",children:[(0,t.jsx)("img",{src:a.brandLogo,alt:a.brandName,className:"brand-logoV030"}),(0,t.jsx)("h2",{className:"brand-nameV030",children:a.brandName}),(0,t.jsxs)("div",{className:"button-containerV030",children:[(0,t.jsx)(r.N_,{to:`/products/${a.brandID}`,className:"view-buttonV030",children:"Products"}),(0,t.jsx)("button",{className:"update-buttonV030",onClick:()=>(a=>{m(a),x.current.showModal()})(a),children:"Update"})]})]},a.brandID)))}),(0,t.jsxs)("dialog",{ref:x,className:"update-brand-modalV030",children:[u&&(0,t.jsx)(s,{selectedBrand:u,onBrandUpdate:a=>{e((e=>e.map((e=>e.brandID===a.brandID?{...e,brandName:a.brandName,brandLogo:a.brandLogo}:e)))),m(null),x.current.close()}}),(0,t.jsx)("button",{className:"close-modal-buttonV030",onClick:()=>x.current.close(),children:"Close"})]})]})}},4594:(a,e,n)=>{n.d(e,{A:()=>r});n(5043);var d=n(579);const r=()=>(0,d.jsx)("div",{className:"dot-spinner-container",children:(0,d.jsx)("div",{className:"dot-spinner",children:Array.from({length:8},((a,e)=>(0,d.jsx)("div",{className:`dot-spinner__dot dot-spinner__dot--${e+1}`},e)))})})}}]);
//# sourceMappingURL=305.2b5a6703.chunk.js.map