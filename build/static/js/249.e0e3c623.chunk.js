"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[249,630],{8249:(e,s,n)=>{n.r(s),n.d(s,{default:()=>l});var a=n(5043),o=n(3216),t=n(3910),r=n(7929),i=n(579);const l=e=>{let{onLoginSuccess:s}=e;const[n,l]=(0,a.useState)({mobile_number:"",password:""}),[c,d]=(0,a.useState)(null),[m,u]=(0,a.useState)(!1),[p,h]=(0,a.useState)(!1),g=(0,o.Zp)(),b=e=>{const{name:s,value:a}=e.target;l({...n,[s]:a})};return(0,i.jsx)("div",{className:"mainContainer010",children:(0,i.jsx)("div",{className:"login-page010",children:(0,i.jsxs)("div",{className:"container010",children:[(0,i.jsx)("h1",{className:"heading010",children:"Login"}),c&&(0,i.jsx)("p",{style:{color:"red"},children:c}),(0,i.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),h(!0);try{const e=await fetch("https://prasad-gz5p.onrender.com/api/login/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!e.ok){const s=await e.json();throw new Error(s.message||"Login failed")}const{token:a}=await e.json();if(localStorage.setItem("authToken",a),console.log(a),"9848098480"===n.mobile_number&&"shiva"===n.password)d(null),s("admin"),g("/Admin-Home");else{const e=await fetch("https://prasad-gz5p.onrender.com/api/home/",{headers:{Authorization:`Token ${a}`,"Content-Type":"application/json"}});if(!e.ok)throw new Error("Failed to verify home redirection.");const n=await e.json();if("supplier_customer_home"===n.redirect)d(null),s("customer"),g("/customer-home");else{if("customer_home"!==n.redirect)throw new Error("Invalid redirection.");d(null),s("BasicCustomer"),g("/bbrands")}}}catch(c){d(c.message)}finally{h(!1)}},className:"form010",children:[(0,i.jsx)("input",{type:"text",name:"mobile_number",placeholder:"Mobile Number",value:n.mobile_number,onChange:b,required:!0,className:"input010"}),(0,i.jsxs)("div",{className:"password-container010",children:[(0,i.jsx)("input",{type:m?"text":"password",name:"password",placeholder:"Password",value:n.password,onChange:b,required:!0,className:"input010"}),(0,i.jsx)("span",{className:"password-toggle010",onClick:()=>u(!m),children:(0,i.jsx)(t.g,{icon:m?r.pS3:r.k6j,className:"eye"})})]}),(0,i.jsx)("button",{type:"submit",className:"login-button010",disabled:p,children:p?"Loading...":"Login"})]}),(0,i.jsxs)("p",{children:["Don't have an account?",(0,i.jsx)("button",{onClick:()=>g("/register"),className:"register-button010",children:"Register here"})]})]})})})}}}]);
//# sourceMappingURL=249.e0e3c623.chunk.js.map