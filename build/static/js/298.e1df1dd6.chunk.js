"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[298],{8891:(e,s,t)=>{t.d(s,{A:()=>i});t(5043);var r=t(579);const i=()=>(0,r.jsx)("div",{className:"dot-spinnerb26",children:Array.from({length:8},((e,s)=>(0,r.jsx)("div",{className:`dot-spinner__dotb26 dot-spinner__dotb26--${s+1}`},s)))})},6298:(e,s,t)=>{t.r(s),t.d(s,{default:()=>l});var r=t(5043),i=t(3216),n=t(8891),c=t(579);const l=()=>{const[e,s]=(0,r.useState)([]),[t,l]=(0,r.useState)(null),[o,a]=(0,r.useState)(!0),[d,h]=(0,r.useState)(!1),[j,x]=(0,r.useState)(null),[b,u]=(0,r.useState)(1),m=(0,i.Zp)(),p=e=>{(async e=>{const s=localStorage.getItem("authToken");try{const t=await fetch(`https://prasad-gz5p.onrender.com/api/view-invoice/${e}/`,{headers:{Authorization:`Token ${s}`}});if(!t.ok)throw new Error("Failed to get Invoice");const r=await t.json();x(r),h(!0),l(null)}catch(t){l(t.message)}})(e)},v=()=>{h(!1),x(null)},y=7*b,g=y-7,k=e.slice(g,y),N=Math.ceil(e.length/7);return(0,r.useEffect)((()=>{(async()=>{const e=localStorage.getItem("authToken");try{const t=await fetch("https://prasad-gz5p.onrender.com/api/order-history/",{headers:{Authorization:`Token ${e}`}});if(!t.ok)throw new Error("Failed to fetch order history");const r=await t.json();s(r.orders?r.orders.reverse():[]),l(null)}catch(t){l(t.message)}finally{a(!1)}})()}),[]),(0,c.jsxs)("div",{className:"order-historyb24",children:[(0,c.jsxs)("div",{className:"order-history-containerb24",children:[(0,c.jsx)("p",{className:"order-history-title-b24",children:"Your Order History"}),(0,c.jsx)("button",{onClick:()=>m("/bbrands"),className:"back-button999b24",children:"Back to Home"})]}),(0,c.jsx)("div",{className:"order-history1b24",children:o?(0,c.jsx)("div",{className:"order-spinnerb24",children:(0,c.jsx)(n.A,{})}):(0,c.jsxs)(c.Fragment,{children:[t&&(0,c.jsx)("p",{className:"error-messageb24",children:t}),e.length>0?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("table",{className:"order-tableb24",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Order ID"}),(0,c.jsx)("th",{children:"Price of Products"}),(0,c.jsx)("th",{children:"Action"})]})}),(0,c.jsx)("tbody",{children:k.map(((e,s)=>(0,c.jsxs)("tr",{className:"order-itemb24",children:[(0,c.jsx)("td",{children:e.id}),(0,c.jsxs)("td",{children:["\u20b9",e.price]}),(0,c.jsx)("td",{children:(0,c.jsx)("button",{className:"view-invoice-buttonb24",onClick:()=>p(e.id),children:"View Invoice"})})]},s)))})]}),(0,c.jsxs)("div",{className:"pagination-controlsb24",children:[(0,c.jsx)("button",{onClick:()=>{b>1&&u((e=>e-1))},disabled:1===b,children:"Previous"}),(0,c.jsxs)("span",{children:["Page ",b," of ",N]}),(0,c.jsx)("button",{onClick:()=>{b<N&&u((e=>e+1))},disabled:b===N,children:"Next"})]})]}):(0,c.jsx)("p",{children:"Your order history is empty"})]})}),d&&(0,c.jsx)("div",{className:"modal-overlayb24",onClick:v,children:(0,c.jsxs)("div",{className:"modal-contentb24",onClick:e=>e.stopPropagation(),children:[(0,c.jsx)("h2",{children:"Invoice Details"}),j&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("h3",{children:["Invoice ID: ",j.invoice_id]}),(0,c.jsxs)("table",{className:"invoice-tableb24",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Product ID"}),(0,c.jsx)("th",{children:"Quantity"}),(0,c.jsx)("th",{children:"Total Price"})]})}),(0,c.jsx)("tbody",{children:j.items.slice().reverse().map(((e,s)=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:e.product_id}),(0,c.jsx)("td",{children:e.quantity}),(0,c.jsxs)("td",{children:["\u20b9",e.total_price]})]},s)))})]})]}),(0,c.jsx)("button",{className:"close-buttonb24",onClick:v,children:"Close"})]})})]})}}}]);
//# sourceMappingURL=298.e1df1dd6.chunk.js.map