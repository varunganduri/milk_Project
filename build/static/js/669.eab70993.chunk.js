"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[669],{8669:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var s=n(5043),o=n(3216),a=n(579);const l=(0,s.lazy)((()=>Promise.all([n.e(446),n.e(156)]).then(n.bind(n,3775)))),h=(0,s.lazy)((()=>n.e(112).then(n.bind(n,5112)))),r=(0,s.lazy)((()=>Promise.all([n.e(446),n.e(249)]).then(n.bind(n,8249)))),i=(0,s.lazy)((()=>Promise.all([n.e(446),n.e(421)]).then(n.bind(n,9421)))),c=(0,s.lazy)((()=>n.e(606).then(n.bind(n,8606)))),m=(0,s.lazy)((()=>n.e(681).then(n.bind(n,5681)))),u=(0,s.lazy)((()=>Promise.all([n.e(446),n.e(151)]).then(n.bind(n,4151)))),j=(0,s.lazy)((()=>n.e(227).then(n.bind(n,4227)))),x=(0,s.lazy)((()=>n.e(440).then(n.bind(n,8440)))),d=(0,s.lazy)((()=>n.e(622).then(n.bind(n,9622)))),p=(0,s.lazy)((()=>n.e(308).then(n.bind(n,2308)))),g=()=>{const[e,t]=(0,s.useState)({username:"",mobile_number:""}),[n,g]=(0,s.useState)(!!localStorage.getItem("authToken")),[b,y]=(0,s.useState)(null);(0,s.useEffect)((()=>{n&&(async()=>{const e=localStorage.getItem("authToken");try{const n=await fetch("https://prasad-gz5p.onrender.com/api/user/details/",{headers:{Authorization:`Token ${e}`}});if(!n.ok)throw new Error("Failed to fetch customer details");const s=await n.json();t({username:s.username,mobile_number:s.mobile_number})}catch(b){y(b.message)}})()}),[n]);return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(s.Suspense,{fallback:(0,a.jsx)("div",{children:"Loading..."}),children:[n&&(0,a.jsx)(u,{userName:e.username,onLogout:async()=>{const e=localStorage.getItem("authToken");try{await fetch("https://prasad-gz5p.onrender.com/api/logout/",{method:"POST",headers:{Authorization:`Token ${e}`,"Content-Type":"application/json"}}),localStorage.removeItem("authToken"),g(!1)}catch(b){console.error("Logout failed:",b)}},className:"nav-styles"}),(0,a.jsxs)(o.BV,{children:[(0,a.jsx)(o.qh,{path:"/",element:(0,a.jsx)(o.C5,{to:n?"/customer-home":"/login"})}),(0,a.jsx)(o.qh,{path:"/login",element:n?(0,a.jsx)(o.C5,{to:"/customer-home"}):(0,a.jsx)(r,{onLoginSuccess:()=>{g(!0)}})}),(0,a.jsx)(o.qh,{path:"/register",element:(0,a.jsx)(l,{})}),(0,a.jsx)(o.qh,{path:"/customer-home",element:n?(0,a.jsx)(h,{}):(0,a.jsx)(o.C5,{to:"/login"})}),(0,a.jsx)(o.qh,{path:"/order-history",element:n?(0,a.jsx)(p,{}):(0,a.jsx)(o.C5,{to:"/login"})}),(0,a.jsx)(o.qh,{path:"/view-cart",element:n?(0,a.jsx)(i,{}):(0,a.jsx)(o.C5,{to:"/login"})}),(0,a.jsx)(o.qh,{path:"/checkout",element:n?(0,a.jsx)(c,{}):(0,a.jsx)(o.C5,{to:"/login"})}),(0,a.jsx)(o.qh,{path:"/invoice",element:n?(0,a.jsx)(m,{}):(0,a.jsx)(o.C5,{to:"/login"})}),(0,a.jsx)(o.qh,{path:"/supplier",element:n?(0,a.jsx)(d,{}):(0,a.jsx)(o.C5,{to:"/login"})}),(0,a.jsx)(o.qh,{path:"/brands",element:(0,a.jsx)(j,{})}),(0,a.jsx)(o.qh,{path:"/products",element:n?(0,a.jsx)(x,{}):(0,a.jsx)(o.C5,{to:"/login"})})]})]})})}}}]);
//# sourceMappingURL=669.eab70993.chunk.js.map