"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[68],{4068:(e,t,s)=>{s.r(t),s.d(t,{default:()=>b});var n=s(5043),a=s(3216),o=s(5475),r=s(3910),i=s(7929),l=s(579);const c=function(e){let{userName:t,onLogout:s}=e;const[c,d]=(0,n.useState)(!1),m=(0,a.zy)(),h=e=>m.pathname===e;return(0,l.jsx)("nav",{className:"admin-navbar",children:(0,l.jsxs)("div",{className:"navbar-content",children:[(0,l.jsxs)("div",{className:"user-name",children:["Welcome ",t]}),(0,l.jsxs)("div",{className:"menu-buttons",children:[(0,l.jsx)(o.N_,{to:"/Admin-Home",className:"menu-button "+(h("/Admin-Home")?"active":""),children:"Home"}),(0,l.jsx)(o.N_,{to:"/brands",className:"menu-button "+(h("/brands")?"active":""),children:"Brands"}),(0,l.jsx)(o.N_,{to:"/customer-data",className:"menu-button "+(h("/customer-data")?"active":""),children:"Suppliers"}),(0,l.jsx)(o.N_,{to:"/order-history",className:"menu-button "+(h("/order-history")?"active":""),children:"Order History"}),(0,l.jsxs)("div",{className:"profile-icon",onClick:()=>{d(!c)},children:[(0,l.jsx)(r.g,{icon:i.VFr,size:"xl"}),c&&(0,l.jsxs)("div",{className:"dropdown",children:[(0,l.jsx)("div",{className:"dropdown-item",children:t}),(0,l.jsx)("div",{className:"dropdown-item",onClick:s,children:"Logout"})]})]})]})]})})},d=(0,n.lazy)((()=>s.e(448).then(s.bind(s,4448)))),m=(0,n.lazy)((()=>s.e(305).then(s.bind(s,2305)))),h=(0,n.lazy)((()=>s.e(255).then(s.bind(s,8255)))),u=(0,n.lazy)((()=>Promise.all([s.e(762),s.e(886)]).then(s.bind(s,886)))),j=(0,n.lazy)((()=>s.e(526).then(s.bind(s,4526)))),x=(0,n.lazy)((()=>s.e(630).then(s.bind(s,8249)))),p=(0,n.lazy)((()=>s.e(775).then(s.bind(s,3775)))),b=()=>{const[e,t]=(0,n.useState)({username:"",mobile_number:""}),[s,o]=(0,n.useState)(!!localStorage.getItem("authToken")),[r,i]=(0,n.useState)(null);(0,n.useEffect)((()=>{s&&(async()=>{const e=localStorage.getItem("authToken");try{const s=await fetch("https://prasad-gz5p.onrender.com/api/user/details/",{headers:{Authorization:`Token ${e}`}});if(!s.ok)throw new Error("Failed to fetch customer details");const n=await s.json();t({username:n.username,mobile_number:n.mobile_number})}catch(r){i(r.message)}})()}),[s]);return(0,l.jsxs)(l.Fragment,{children:[s&&(0,l.jsx)(c,{userName:e.username,onLogout:async()=>{const e=localStorage.getItem("authToken");try{await fetch("https://prasad-gz5p.onrender.com/api/logout/",{method:"POST",headers:{Authorization:`Token ${e}`,"Content-Type":"application/json"}}),localStorage.removeItem("authToken"),o(!1)}catch(r){console.error("Logout failed:",r)}}}),(0,l.jsx)(n.Suspense,{fallback:(0,l.jsx)("div",{children:"Loading..."}),children:(0,l.jsxs)(a.BV,{children:[(0,l.jsx)(a.qh,{path:"/register",element:(0,l.jsx)(p,{})}),(0,l.jsx)(a.qh,{path:"/login",element:s?(0,l.jsx)(a.C5,{to:"/Admin-Home"}):(0,l.jsx)(x,{onLoginSuccess:()=>{o(!0)}})}),(0,l.jsx)(a.qh,{path:"/Admin-Home",element:s?(0,l.jsx)(d,{}):(0,l.jsx)(a.C5,{to:"/login"})}),(0,l.jsx)(a.qh,{path:"/brands",element:s?(0,l.jsx)(m,{}):(0,l.jsx)(a.C5,{to:"/login"})}),(0,l.jsx)(a.qh,{path:"/customer-data",element:s?(0,l.jsx)(h,{}):(0,l.jsx)(a.C5,{to:"/login"})}),(0,l.jsx)(a.qh,{path:"/order-history",element:s?(0,l.jsx)(u,{}):(0,l.jsx)(a.C5,{to:"/login"})}),(0,l.jsx)(a.qh,{path:"/",element:(0,l.jsx)(a.C5,{to:s?"/Admin-Home":"/login"})}),(0,l.jsx)(a.qh,{path:"/products/:brandID",element:s?(0,l.jsx)(j,{}):(0,l.jsx)(a.C5,{to:"/login"})})]})})]})}}}]);
//# sourceMappingURL=68.37074401.chunk.js.map